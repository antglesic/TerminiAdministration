@page "/termin/view"

@using TerminiWeb.Infrastructure.TerminService.Dtos
@using GrabaUIPackage.Components.Common

@if (_termin == null)
{
	<LoadIndicator />
}
else
{
	<div class="modal-container">
		<div class="termin-info">
			<h3>Termin Information</h3>
			<p>Date: @(_termin?.ScheduledDate.ToString("dd.MM.yyyy"))</p>
			<p>Start Time: @(_termin?.StartTime.ToString("HH:mm"))</p>
			<p>Status: @(_termin?.WasPlayed == true ? "Played" : "Not played yet")</p>
		</div>

		<div class="teams-container">
			@if (_teamNumbers != null && _teamNumbers.Any())
			{
				@foreach (var teamNumber in _teamNumbers)
				{
					<div class="team-table">
						<h4>Team @teamNumber</h4>
						<table>
							<thead>
								<tr>
									<th>Player</th>
									<th>Rating</th>
								</tr>
							</thead>
							<tbody>
								@if (_termin?.Players != null)
								{
									@foreach (var player in _termin.Players.Where(p => p.TeamNumber == teamNumber))
									{
										<tr>
											<td>@player.FullName</td>
											<td>@player.Rating</td>
										</tr>
									}
								}
							</tbody>
						</table>
					</div>
				}
			}
			else
			{
				<p>No teams have been created yet.</p>
			}
		</div>
	</div>
}

<div class="modal-header">
	<button type="button" class="close-button" @onclick="() => Close()">
		<span>&times;</span>
	</button>
</div>